# mADM1 Component Index Reference (62 State Variables)

## All 62 Components with State Indices

| Idx | ID | Name | Type | Units | Notes |
|-----|----|----|------|-------|-------|
| 0 | S_su | Monosaccharides | Soluble substrate | kg/m³ | Simple sugars |
| 1 | S_aa | Amino acids | Soluble substrate | kg/m³ | From protein hydrolysis |
| 2 | S_fa | Long-chain fatty acids | Soluble substrate | kg/m³ | LCFA |
| 3 | S_va | Valerate | Soluble VFA | kg COD/m³ | C5 VFA |
| 4 | S_bu | Butyrate | Soluble VFA | kg COD/m³ | C4 VFA |
| 5 | S_pro | Propionate | Soluble VFA | kg COD/m³ | C3 VFA |
| 6 | S_ac | Acetate | Soluble VFA | kg COD/m³ | C2 VFA |
| 7 | S_h2 | Dissolved hydrogen | Gas | kg COD/m³ | Hydrogen gas |
| 8 | S_ch4 | Dissolved methane | Gas | kg COD/m³ | Methane gas |
| 9 | S_IC | Inorganic carbon | Soluble inorganic | kg C/m³ | CO2 + HCO3- + CO32- |
| 10 | S_IN | Inorganic nitrogen | Soluble inorganic | kg N/m³ | NH4+ / NH3 |
| 11 | S_IP | Inorganic phosphate | Soluble inorganic | kg P/m³ | PO43- / HPO42- / H2PO4- |
| 12 | S_I | Soluble inerts | Soluble inert | kg COD/m³ | Non-biodegradable |
| 13 | X_ch | Carbohydrates | Particulate substrate | kg/m³ | Complex sugars, starch, cellulose |
| 14 | X_pr | Proteins | Particulate substrate | kg/m³ | Slowly degradable, N-rich |
| 15 | X_li | Lipids | Particulate substrate | kg/m³ | Fats, oils, grease |
| 16 | X_su | Sugar degraders | Biomass | kg/m³ | Monosaccharide fermenters |
| 17 | X_aa | Amino acid degraders | Biomass | kg/m³ | Amino acid fermenters |
| 18 | X_fa | LCFA degraders | Biomass | kg/m³ | Fatty acid degraders |
| 19 | X_c4 | C4/C5 degraders | Biomass | kg/m³ | Butyrate/valerate fermenters |
| 20 | X_pro | Propionate degraders | Biomass | kg/m³ | Syntrophic propionate oxidizers |
| 21 | X_ac | Acetoclastic methanogens | Biomass | kg/m³ | Methanosaeta/Methanosarcina |
| 22 | X_h2 | Hydrogenotrophic methanogens | Biomass | kg/m³ | Methanobacterium/Methanobrevibacter |
| 23 | X_I | Particulate inerts | Particulate inert | kg/m³ | Non-biodegradable solids |
| 24 | X_PHA | Polyhydroxyalkanoates | Storage polymer | kg/m³ | Internal storage in PAOs |
| 25 | X_PP | Polyphosphate | Storage polymer | kg P/m³ | Internal P storage in PAOs |
| 26 | X_PAO | Phosphorus accumulators | EBPR biomass | kg/m³ | Enhanced biological P removal |
| 27 | S_K | Potassium ion | Metal cation | kg K/m³ | Monovalent cation |
| 28 | S_Mg | Magnesium ion | Metal cation | kg Mg/m³ | Divalent cation |
| 29 | S_SO4 | Sulfate | Soluble sulfur | kg S/m³ | Electron acceptor for SRB |
| 30 | S_IS | Inorganic sulfide | Soluble sulfur | kg S/m³ | H2S + HS- + S2- total |
| 31 | X_hSRB | H2-utilizing SRB | SRB biomass | kg/m³ | Hydrogenotrophic SRB |
| 32 | X_aSRB | Acetate-utilizing SRB | SRB biomass | kg/m³ | Acetotrophic SRB |
| 33 | X_pSRB | Propionate-utilizing SRB | SRB biomass | kg/m³ | Propionotrophic SRB |
| 34 | X_c4SRB | C4/C5-utilizing SRB | SRB biomass | kg/m³ | Butyrate/valerate-utilizing SRB |
| 35 | S_S0 | Elemental sulfur | Soluble sulfur | kg S/m³ | S0 intermediate |
| 36 | S_Fe3 | Ferric iron | Soluble iron | kg Fe/m³ | Fe(III), oxidized form |
| 37 | S_Fe2 | Ferrous iron | Soluble iron | kg Fe/m³ | Fe(II), reduced form |
| 38 | X_HFO_H | HFO (high affinity) | Iron adsorbent | kg Fe/m³ | Active P adsorption sites |
| 39 | X_HFO_L | HFO (low affinity) | Iron adsorbent | kg Fe/m³ | Active P adsorption sites |
| 40 | X_HFO_old | Aged HFO | Iron adsorbent | kg Fe/m³ | Deactivated HFO |
| 41 | X_HFO_HP | HFO-H with P bound | Iron adsorbent | kg Fe/m³ | P-loaded high affinity sites |
| 42 | X_HFO_LP | HFO-L with P bound | Iron adsorbent | kg Fe/m³ | P-loaded low affinity sites |
| 43 | X_HFO_HP_old | Aged HFO-H with P | Iron adsorbent | kg Fe/m³ | Aged P-loaded high affinity |
| 44 | X_HFO_LP_old | Aged HFO-L with P | Iron adsorbent | kg Fe/m³ | Aged P-loaded low affinity |
| 45 | S_Ca | Calcium ion | Metal cation | kg Ca/m³ | Divalent cation |
| 46 | S_Al | Aluminum ion | Metal cation | kg Al/m³ | Trivalent cation (alum) |
| 47 | X_CCM | Calcite | Ca-P mineral | kg/m³ | CaCO3 |
| 48 | X_ACC | Aragonite | Ca-CO3 mineral | kg/m³ | CaCO3 polymorph |
| 49 | X_ACP | Amorphous Ca-phosphate | Ca-P mineral | kg/m³ | Ca3(PO4)2 |
| 50 | X_HAP | Hydroxylapatite | Ca-P mineral | kg/m³ | Ca5(PO4)3OH, stable P form |
| 51 | X_DCPD | Dicalcium phosphate | Ca-P mineral | kg/m³ | CaHPO4·2H2O |
| 52 | X_OCP | Octacalcium phosphate | Ca-P mineral | kg/m³ | Ca4H(PO4)3 |
| 53 | X_struv | Struvite | Mg-P mineral | kg/m³ | MgNH4PO4·6H2O, MAP |
| 54 | X_newb | Newberyite | Mg-P mineral | kg/m³ | MgHPO4·3H2O |
| 55 | X_magn | Magnesite | Mg-CO3 mineral | kg/m³ | MgCO3 |
| 56 | X_kstruv | K-struvite | Mg-P mineral | kg/m³ | MgKPO4·6H2O |
| 57 | X_FeS | Iron sulfide | Fe-S mineral | kg/m³ | FeS, H2S precipitation |
| 58 | X_Fe3PO42 | Ferrous phosphate | Fe-P mineral | kg/m³ | Fe3(PO4)2 |
| 59 | X_AlPO4 | Aluminum phosphate | Al-P mineral | kg/m³ | AlPO4 |
| 60 | S_Na | Sodium ion | Metal cation | kg Na/m³ | Monovalent cation |
| 61 | S_Cl | Chloride ion | Metal anion | kg Cl/m³ | Monovalent anion |
| - | H2O | Water | Solvent | kg/m³ | Index 62, not a state variable |

---

## Grouped by Category

### ADM1 Core (27 components)
- **Soluble organics:** 0-7 (S_su through S_h2)
- **Soluble inorganic:** 8-12 (S_ch4 through S_I)
- **Particulates:** 13-23 (X_ch through X_I)

### EBPR Extension (3 components)
- **Storage:** 24-25 (X_PHA, X_PP)
- **Biomass:** 26 (X_PAO)

### Metal Ions (6 components, non-sequential)
- **Located:** 27, 28, 45, 46, 60, 61
- **Types:** Mono, di-, tri-valent cations and anions

### Sulfur Extension (7 components)
- **Soluble:** 29, 30, 35 (S_SO4, S_IS, S_S0)
- **Biomass:** 31-34 (4 SRB types)

### Iron Extension (9 components)
- **Soluble:** 36, 37 (S_Fe3, S_Fe2)
- **HFO:** 38-44 (7 variants)

### Mineral Precipitates (13 components)
- **Ca-P:** 47-52 (6 minerals)
- **Mg-based:** 53-56 (4 minerals)
- **Fe/Al:** 57-59 (3 minerals)

---

## Unit Conventions

| Component Group | Units | Basis |
|-----------------|-------|-------|
| Organics (S_su, S_aa, S_fa) | kg/m³ | Chemical mass |
| VFAs (S_va, S_bu, S_pro, S_ac) | kg COD/m³ | COD equivalent |
| Gases (S_h2, S_ch4) | kg COD/m³ | COD equivalent |
| Inorganic C (S_IC) | kg C/m³ | Carbon mass |
| Inorganic N (S_IN) | kg N/m³ | Nitrogen mass |
| Inorganic P (S_IP, X_PP) | kg P/m³ | Phosphorus mass |
| Biomass (X_su through X_c4SRB) | kg/m³ | Dry mass |
| Metal ions (S_K, S_Mg, etc.) | kg element/m³ | Element mass |
| Sulfur (S_SO4, S_IS, S_S0) | kg S/m³ | Sulfur mass |
| Iron (S_Fe3, S_Fe2, X_HFO*) | kg Fe/m³ | Iron mass |
| Minerals (X_CCM through X_AlPO4) | kg/m³ | Dry mass |

---

## Component Access in Code

```python
from utils.qsdsan_madm1 import create_madm1_cmps

cmps = create_madm1_cmps()

# Dynamic indexing (ALWAYS use this pattern)
idx_ac = cmps.index('S_ac')      # Returns 6
idx_hap = cmps.index('X_HAP')    # Returns 50
idx_struv = cmps.index('X_struv') # Returns 53

# Access properties
MW = cmps.chem_MW[idx_ac]        # Molecular weight
i_mass = cmps.i_mass[idx_ac]     # COD content factor
i_N = cmps.i_N[idx_ac]           # Nitrogen content
i_P = cmps.i_P[idx_ac]           # Phosphorus content

# NEVER hardcode indices!
# Wrong: state_arr[6]  # What if component order changes?
# Right: state_arr[cmps.index('S_ac')]
```

---

## Fast Lookup Tables

### Find index by component ID
Use `cmps.index('component_id')` or reference table above.

### Mineral precipitation stoichiometry
```python
sum_stoichios = [2, 2, 5, 9, 3, 8, 3, 3, 2, 3, 2, 2, 2]
# Order: CCM, ACC, ACP, HAP, DCPD, OCP, struv, newb, magn, kstruv, FeS, Fe3PO42, AlPO4
```

### HFO active site factors
- X_HFO_H: ASF = 1.2 (mol P sites / mol Fe)
- X_HFO_L: ASF = 0.31 (mol P sites / mol Fe)

### Charge valencies for PCM solver
- Monovalent cations: Na+, K+, NH4+ → charge = +1
- Divalent cations: Mg2+, Ca2+, Fe2+ → charge = +2
- Trivalent cations: Fe3+, Al3+ → charge = +3
- Anions: Cl-, HS-, HCO3-, acetate, etc. → variable

---

Generated: 2025-10-27
